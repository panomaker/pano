Создание документации для вашего проекта — это важный шаг, который поможет вам и другим разработчикам лучше понимать структуру проекта, его функциональность и способы поддержки и расширения. Документация также будет полезна для новых участников команды или для передачи проекта в будущем.

### Структура документации

1. **Введение**
2. **Структура проекта**
3. **Установка и настройка**
4. **Используемые технологии**
5. **Описание функциональности**
6. **API эндпоинты**
7. **Работа с базой данных**
8. **Обновление данных**
9. **Поддержка и отладка**
10. **Заключение и план развития**

### Пример документации для вашего проекта

---

## 1. Введение

Этот проект предназначен для отображения панорамных изображений и картографических данных на веб-странице. Система использует данные, хранящиеся в базе данных MySQL, для загрузки и отображения фреймов с соответствующими координатами и временными метками. Проект включает серверную и клиентскую части, взаимодействующие через API.

## 2. Структура проекта

Пример структуры проекта:

```plaintext
project/
│
├── api/                    # Папка с API-эндпоинтами
│   ├── frames.php          # API для получения списка фреймов из базы данных
│   └── update_frame.php    # API для обновления информации о фреймах (при необходимости)
│
├── cache/                  # Папка для кэшированных данных
│   └── frames_list.json    # JSON-файл с кэшированными данными фреймов
│
├── uploads/                # Папка для загружаемых файлов
│   └── frames/             # Папка с фреймами (изображения)
│
├── partials/               # Папка с фрагментами кода (partials)
│   ├── head.php            # Файл для секции <head>
│   ├── body.php            # Основной контент страницы
│   └── scripts.js          # Основной JavaScript-файл
│
├── logs/                   # Папка для логов
│   └── api.log             # Лог-файл для логирования запросов к API
│
├── scripts/                # Скрипты для работы с проектом
│   └── import_frames.php   # Скрипт для импорта данных из JSON в базу данных
│
├── generate_cache.php      # Скрипт для генерации кэша
├── index.php               # Основной файл страницы
└── stats.php               # Статистика и дополнительные функции
```

## 3. Установка и настройка

### 3.1. Системные требования

- **Веб-сервер**: Apache/Nginx
- **PHP**: версии 7.4 или выше
- **MySQL**: версии 8.0 или выше
- **Браузер**: Последние версии Chrome, Firefox, Safari

### 3.2. Установка

1. **Клонирование репозитория**:
   ```bash
   git clone https://github.com/your-repository/project.git
   ```

2. **Настройка конфигурации MySQL**:
   - Создайте базу данных и пользователя с соответствующими правами.
   - Обновите конфигурационный файл для подключения к базе данных (например, в `config.php` или непосредственно в скриптах).

3. **Настройка прав доступа**:
   - Убедитесь, что папки `cache/`, `uploads/`, `logs/` и `scripts/` имеют нужные права доступа для записи.

4. **Импорт данных в базу данных**:
   - Запустите скрипт `scripts/import_frames.php`, чтобы импортировать данные из JSON-файла в базу данных.

## 4. Используемые технологии

- **PHP**: Используется для серверной части, включая API и скрипты обработки данных.
- **MySQL**: Реляционная база данных для хранения информации о фреймах.
- **JavaScript**: Используется для работы с клиентской частью проекта (загрузка данных через API, отображение панорам и карт).
- **Pannellum.js**: Библиотека для работы с панорамными изображениями.
- **Leaflet.js**: Библиотека для работы с интерактивными картами.
- **HTML/CSS**: Используются для создания пользовательского интерфейса.

## 5. Описание функциональности

### 5.1. Загрузка фреймов

Фреймы (изображения) загружаются в папку `uploads/frames/`. После загрузки данных вам нужно запустить скрипт `import_frames.php`, чтобы обновить базу данных.

### 5.2. Отображение панорам

При загрузке страницы `index.php`, скрипт `scripts.js` отправляет запрос на API (например, `api/frames.php`), чтобы получить данные о фреймах. Затем данные используются для отображения панорамных изображений с помощью Pannellum.js.

### 5.3. Отображение маркеров на карте

Данные о координатах фреймов используются для отображения маркеров на карте с помощью Leaflet.js. Маркеры интерактивны и позволяют пользователю переходить к соответствующим панорамам.

## 6. API эндпоинты

### 6.1. Получение списка фреймов

**URL**: `/api/frames.php`

**Метод**: `GET`

**Описание**: Возвращает список фреймов с их координатами и временными метками.

**Пример ответа**:
```json
[
    {
        "id": 1,
        "file": "frame1.jpg",
        "lat": "55.7558",
        "lon": "37.6173",
        "timestamp": "2023-01-01 12:00:00"
    },
    ...
]
```

### 6.2. Обновление информации о фрейме (если используется)

**URL**: `/api/update_frame.php`

**Метод**: `POST`

**Описание**: Обновляет информацию о конкретном фрейме.

**Параметры**:
- `id`: ID фрейма
- `file`: Имя файла
- `lat`: Широта
- `lon`: Долгота
- `timestamp`: Время съемки

## 7. Работа с базой данных

### 7.1. Структура таблицы `frames`

```sql
CREATE TABLE frames (
    id INT AUTO_INCREMENT PRIMARY KEY,
    file VARCHAR(255) NOT NULL,
    lat DECIMAL(10, 6) NOT NULL,
    lon DECIMAL(10, 6) NOT NULL,
    timestamp DATETIME NOT NULL
);
```

### 7.2. Импорт данных

Используйте скрипт `scripts/import_frames.php` для импорта данных из JSON-файла в таблицу `frames`.

## 8. Обновление данных

Когда вы добавляете новые фреймы в папку `uploads/frames/`, выполните следующие шаги:

1. Запустите скрипт `scripts/import_frames.php` для обновления базы данных.
2. Проверьте, что данные обновлены правильно, и они отображаются в интерфейсе.

## 9. Поддержка и отладка

### 9.1. Логирование

Логи запросов к API записываются в файл `logs/api.log`. Проверьте этот файл, если возникают проблемы с запросами к базе данных.

### 9.2. Отображение ошибок

Включите отображение ошибок в PHP для диагностики проблем:

```php
ini_set('display_errors', 1);
ini_set('display_startup_errors', 1);
error_reporting(E_ALL);
```

### 9.3. Проверка работы API

Используйте инструменты, такие как Postman или cURL, для тестирования API эндпоинтов.

## 10. Заключение и план развития

### 10.1. Введение новых функций

- Добавление фильтрации и сортировки фреймов по координатам или дате.
- Поддержка загрузки и отображения дополнительных типов данных (например, видео).

### 10.2. Улучшение производительности

- Внедрение кэширования запросов к базе данных.
- Оптимизация запросов для работы с большими объемами данных.

### 10.3. Поддержка и обновления

Регулярно проверяйте логи и обновляйте зависимости проекта для обеспечения его безопасности и стабильности.

---

Эта документация должна помочь вам и другим разработчикам легко понять и поддерживать ваш проект. Если у вас появятся новые функции или изменения в проекте, не забывайте обновлять документацию, чтобы она оставалась актуальной.